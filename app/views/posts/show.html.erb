<h1>文章詳細</h1>
<p>標題：<%= @post.title %></p>
<p>狀態：
  <span class="badge <%= @post.status == 'published' ? 'bg-success' : (@post.status == 'draft' ? 'bg-warning' : 'bg-danger') %>">
    <%= case @post.status
        when 'published'
          '已發布'
        when 'draft'
          '草稿'
        when 'deleted'
          '已刪除'
        else
          @post.status
        end %>
  </span>
</p>
<div>內容：<%= @post.content %></div>

<% if logged_in? && @post.user_id == current_user.id %>
  <div class="mt-3">
    <%= link_to "編輯", edit_post_path(@post), class: "btn btn-primary" %>
    
    <% if @post.draft? %>
      <%= link_to "發布", publish_post_path(@post), data: { turbo_method: :patch, turbo_confirm: "確定要發布嗎？" }, class: "btn btn-success" %>
    <% elsif @post.published? %>
      <%= link_to "取消發布", unpublish_post_path(@post), data: { turbo_method: :patch, turbo_confirm: "確定要取消發布嗎？" }, class: "btn btn-warning" %>
    <% end %>
    
    <% unless @post.deleted? %>
      <%= link_to "刪除", delete_post_path(@post), data: { turbo_method: :patch, turbo_confirm: "確定要刪除嗎？" }, class: "btn btn-danger" %>
    <% else %>
      <%= link_to "恢復", restore_post_path(@post), data: { turbo_method: :patch, turbo_confirm: "確定要恢復嗎？" }, class: "btn btn-secondary" %>
    <% end %>
  </div>
<% end %>

<%= link_to "回到列表", posts_path, class: "btn btn-secondary" %>
